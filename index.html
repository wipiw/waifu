<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Waifu Pics Viewer</title>
    <style>
        :root {
            --bg-color-dark: #121212;
            --text-color-dark: #ffffff;
            --button-bg-dark: #333333;
            --bg-color-light: #f4f4f9;
            --text-color-light: #333333;
            --button-bg-light: #6c63ff;
        }

        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--bg-color-dark);
            color: var(--text-color-dark);
            transition: all 0.3s ease;
        }

        header {
            background-color: #6c63ff;
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
        }

        .container {
            text-align: center;
            margin: 20px;
        }

        button {
            background-color: var(--button-bg-dark);
            color: var(--text-color-dark);
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.3s ease;
        }

        button:hover {
            background-color: #555555;
        }

        .toggle-theme {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: transparent;
            border: none;
            cursor: pointer;
            font-size: 20px;
            color: white;
        }

        /* Grid layout for images */
        .image-container {
            display: grid;
            grid-template-columns: repeat(8, 1fr); /* 8 images per row */
            gap: 10px;
            margin-top: 20px;
        }

        img {
            width: 100%;
            height: auto;
            border: 2px solid #333333;
            border-radius: 10px;
            cursor: pointer;
            margin-bottom: 20px;
        }

        footer {
            background-color: #6c63ff;
            color: white;
            text-align: center;
            padding: 10px;
            position: fixed;
            width: 100%;
            bottom: 0;
        }

        /* Light mode styles */
        .light-mode {
            background-color: var(--bg-color-light);
            color: var(--text-color-light);
        }

        .light-mode button {
            background-color: var(--button-bg-light);
            color: var(--text-color-light);
        }

        .light-mode img {
            border-color: #dddddd;
        }

        .light-mode .toggle-theme {
            color: #333333;
        }

        /* Popup styles */
        .popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.8);
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .popup img {
            max-width: 90%;
            max-height: 90vh;
            height: auto;
        }

        /* Collapsible menu styles */
        .menu {
            background-color: #333;
            padding: 10px;
            width: 250px;
            position: fixed;
            top: 80px;
            left: 0;
            bottom: 0;
            color: white;
            overflow: auto;
            transition: all 0.3s ease;
        }

        .menu button {
            background-color: #444;
            color: white;
            padding: 10px;
            border: none;
            width: 100%;
            text-align: left;
            cursor: pointer;
        }

        .menu button:hover {
            background-color: #555;
        }

        .submenu {
            display: none;
            padding-left: 20px;
        }

        .menu button.active + .submenu {
            display: block;
        }

        /* For collapsible menu button icons */
        .submenu button {
            padding: 5px 15px;
            background-color: transparent;
            border: none;
            color: white;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <header>
        <h1>Waifu Pics Viewer</h1>
        <button class="toggle-theme" id="toggleTheme">☀️</button>
    </header>

    <!-- Menu with collapsible categories -->
    <div class="menu" id="menu">
        <button id="sfwMenuButton">SFW Categories</button>
        <div class="submenu" id="sfwMenu">
            <button class="sfwCategory">waifu</button>
            <button class="sfwCategory">neko</button>
            <button class="sfwCategory">shinobu</button>
            <button class="sfwCategory">megumin</button>
            <button class="sfwCategory">bully</button>
            <button class="sfwCategory">cuddle</button>
            <button class="sfwCategory">cry</button>
            <button class="sfwCategory">hug</button>
            <button class="sfwCategory">awoo</button>
            <button class="sfwCategory">kiss</button>
            <button class="sfwCategory">lick</button>
            <button class="sfwCategory">pat</button>
            <button class="sfwCategory">smug</button>
            <button class="sfwCategory">bonk</button>
            <button class="sfwCategory">yeet</button>
            <button class="sfwCategory">blush</button>
            <button class="sfwCategory">smile</button>
            <button class="sfwCategory">wave</button>
            <button class="sfwCategory">highfive</button>
            <button class="sfwCategory">handhold</button>
            <button class="sfwCategory">nom</button>
            <button class="sfwCategory">bite</button>
            <button class="sfwCategory">glomp</button>
            <button class="sfwCategory">slap</button>
            <button class="sfwCategory">kill</button>
            <button class="sfwCategory">kick</button>
            <button class="sfwCategory">happy</button>
            <button class="sfwCategory">wink</button>
            <button class="sfwCategory">poke</button>
            <button class="sfwCategory">dance</button>
            <button class="sfwCategory">cringe</button>
        </div>

        <button id="nsfwMenuButton">NSFW Categories</button>
        <div class="submenu" id="nsfwMenu">
            <button class="nsfwCategory">waifu</button>
            <button class="nsfwCategory">neko</button>
            <button class="nsfwCategory">trap</button>
            <button class="nsfwCategory">blowjob</button>
        </div>
    </div>

    <div class="container">
        <!-- Get Images Button -->
        <button id="fetchImage">Get 20 Waifu Images</button>
        
        <!-- Container to display images -->
        <div id="imageContainer" class="image-container"></div>
        
        <!-- Show More Button -->
        <button id="showMore" style="display:none;">Show More</button>
    </div>
    
    <!-- Popup for showing large image -->
    <div id="popup" class="popup">
        <img id="popupImage" src="" alt="Popup Image">
    </div>

    <footer>
        <p>&copy; 2024 Waifu Pics Viewer</p>
    </footer>

    <script>
        const fetchButton = document.getElementById("fetchImage");
        const showMoreButton = document.getElementById("showMore");
        const imageContainer = document.getElementById("imageContainer");
        const body = document.body;
        const popup = document.getElementById("popup");
        const popupImage = document.getElementById("popupImage");
        const sfwMenuButton = document.getElementById("sfwMenuButton");
        const nsfwMenuButton = document.getElementById("nsfwMenuButton");
        const sfwMenu = document.getElementById("sfwMenu");
        const nsfwMenu = document.getElementById("nsfwMenu");
        const sfwCategories = document.querySelectorAll(".sfwCategory");
        const nsfwCategories = document.querySelectorAll(".nsfwCategory");
        let currentCategory = "waifu"; // Default category

        // Toggle menu visibility
        sfwMenuButton.addEventListener("click", () => {
            sfwMenu.classList.toggle("active");
        });

        nsfwMenuButton.addEventListener("click", () => {
            nsfwMenu.classList.toggle("active");
        });

        // Fetch images from the API based on selected category
        function fetchImages(category, type = 'nsfw') {
            fetch(`https://api.waifu.pics/many/${type}/${category}`, {
                method: 'POST',
                body: JSON.stringify({
                    exclude: []
                }),
                headers: {
                    'Content-Type': 'application/json',
                },
            })
            .then(response => response.json())
            .then(data => {
                const images = data.files;
                imageContainer.innerHTML = ''; // Clear previous images
                images.forEach((imageUrl) => {
                    const imgElement = document.createElement("img");
                    imgElement.src = imageUrl;
                    imgElement.alt = "Waifu Image";
                    imgElement.onclick = () => togglePopup(imgElement.src);
                    imageContainer.appendChild(imgElement);
                });
                showMoreButton.style.display = 'block'; // Show "Show More" button
            })
            .catch(error => {
                console.error("Error fetching images:", error);
                alert("Failed to fetch images. Please try again later.");
            });
        }

        // Show or hide the popup when clicking an image
        function togglePopup(src) {
            if (popup.style.display === 'none' || !popup.style.display) {
                popupImage.src = src;
                popup.style.display = 'flex'; // Show the popup
            } else {
                popup.style.display = 'none'; // Hide the popup
            }
        }

        // Show more images
        showMoreButton.addEventListener("click", () => {
            fetchImages(currentCategory, currentCategory.startsWith('sfw') ? 'sfw' : 'nsfw');
        });

        // Change category for SFW and NSFW categories
        sfwCategories.forEach((categoryButton) => {
            categoryButton.addEventListener("click", () => {
                currentCategory = categoryButton.textContent;
                fetchImages(currentCategory, 'sfw');
            });
        });

        nsfwCategories.forEach((categoryButton) => {
            categoryButton.addEventListener("click", () => {
                currentCategory = categoryButton.textContent;
                fetchImages(currentCategory, 'nsfw');
            });
        });

        // Initial fetch for default category (waifu, nsfw)
        fetchImages(currentCategory, 'nsfw');

        // Toggle between light and dark mode
        const toggleThemeButton = document.getElementById("toggleTheme");
        toggleThemeButton.addEventListener("click", () => {
            body.classList.toggle("light-mode");
            const isLightMode = body.classList.contains("light-mode");
            toggleThemeButton.textContent = isLightMode ? "🌙" : "☀️";
        });
    </script>
</body>
</html>
